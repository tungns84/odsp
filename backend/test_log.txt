[INFO] Scanning for projects...
[INFO] 
[INFO] -----------------------------< com.gs:dsp >-----------------------------
[INFO] Building dsp 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- clean:3.4.1:clean (default-clean) @ dsp ---
[INFO] Deleting D:\projects\ldop-demo\backend\target
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ dsp ---
[INFO] Copying 1 resource from src\main\resources to target\classes
[INFO] Copying 6 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.14.1:compile (default-compile) @ dsp ---
[INFO] Recompiling the module because of changed source code.
[INFO] Compiling 58 source files with javac [debug parameters release 21] to target\classes
[INFO] Annotation processing is enabled because one or more processors were found
  on the class path. A future release of javac may disable annotation processing
  unless at least one processor is specified by name (-processor), or a search
  path is specified (--processor-path, --processor-module-path), or annotation
  processing is enabled explicitly (-proc:only, -proc:full).
  Use -Xlint:-options to suppress this message.
  Use -proc:none to disable annotation processing.
[WARNING] /D:/projects/ldop-demo/backend/src/main/java/com/gs/dsp/domain/DataEndpoint.java:[48,20] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /D:/projects/ldop-demo/backend/src/main/java/com/gs/dsp/domain/DataEndpoint.java:[51,21] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[WARNING] /D:/projects/ldop-demo/backend/src/main/java/com/gs/dsp/domain/DataEndpoint.java:[54,20] @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ dsp ---
[INFO] Copying 1 resource from src\test\resources to target\test-classes
[INFO] 
[INFO] --- compiler:3.14.1:testCompile (default-testCompile) @ dsp ---
[INFO] Recompiling the module because of changed dependency.
[INFO] Compiling 10 source files with javac [debug parameters release 21] to target\test-classes
[INFO] Annotation processing is enabled because one or more processors were found
  on the class path. A future release of javac may disable annotation processing
  unless at least one processor is specified by name (-processor), or a search
  path is specified (--processor-path, --processor-module-path), or annotation
  processing is enabled explicitly (-proc:only, -proc:full).
  Use -Xlint:-options to suppress this message.
  Use -proc:none to disable annotation processing.
[INFO] 
[INFO] --- surefire:3.5.4:test (default-test) @ dsp ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.gs.dsp.controller.ConnectorControllerTest
11:53:36.169 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.gs.dsp.controller.ConnectorControllerTest]: ConnectorControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
11:53:36.670 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.gs.dsp.DspApplication for test class com.gs.dsp.controller.ConnectorControllerTest

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-03 11:53:37 [main] INFO  c.g.d.c.ConnectorControllerTest - Starting ConnectorControllerTest using Java 21.0.7 with PID 28892 (started by TungNS in D:\projects\ldop-demo\backend)
2025-12-03 11:53:37 [main] DEBUG c.g.d.c.ConnectorControllerTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-03 11:53:37 [main] INFO  c.g.d.c.ConnectorControllerTest - The following 1 profile is active: "test"
2025-12-03 11:53:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-03 11:53:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 309 ms. Found 4 JPA repository interfaces.
2025-12-03 11:53:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-03 11:53:45 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ldop_test user=SA
2025-12-03 11:53:45 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-03 11:53:45 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2025-12-03 11:53:46 [main] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-12-03 11:53:46 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-12-03 11:53:46 [main] INFO  liquibase.snapshot - Creating snapshot
2025-12-03 11:53:46 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-12-03 11:53:46 [main] INFO  liquibase.command - Using deploymentId: 4737624238
2025-12-03 11:53:46 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/001-initial-schema.yaml::001-create-connectors-table::antigravity
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Table connectors created
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Index idx_connectors_tenant created
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/001-initial-schema.yaml::001-create-connectors-table::antigravity ran successfully in 31ms
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/001-initial-schema.yaml::001-create-data-endpoints-table::antigravity
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Table data_endpoints created
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Index idx_data_endpoints_tenant created
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/001-initial-schema.yaml::001-create-data-endpoints-table::antigravity ran successfully in 32ms
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/002-data-endpoint-redesign.yaml::002-add-query-config-column::antigravity
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Columns query_config(JSONB) added to data_endpoints
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/002-data-endpoint-redesign.yaml::002-add-query-config-column::antigravity ran successfully in 47ms
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/002-data-endpoint-redesign.yaml::002-drop-target-resource-column::antigravity
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Column data_endpoints.target_resource dropped
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/002-data-endpoint-redesign.yaml::002-drop-target-resource-column::antigravity ran successfully in 25ms
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/003-create-api-keys-table.yaml::003-create-api-keys-table::antigravity
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Table api_keys created
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Index idx_key_hash created
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Index idx_tenant_api created
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/003-create-api-keys-table.yaml::003-create-api-keys-table::antigravity ran successfully in 12ms
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/004-create-tenants-table.yaml::004-create-tenants-table::antigravity
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - Table tenants created
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/004-create-tenants-table.yaml::004-create-tenants-table::antigravity ran successfully in 12ms
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/005-initial-data.yaml::005-initial-data-tenant::antigravity
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - New row inserted into tenants
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/005-initial-data.yaml::005-initial-data-tenant::antigravity ran successfully in 9ms
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/005-initial-data.yaml::005-initial-data-api-key::antigravity
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - New row inserted into api_keys
2025-12-03 11:53:47 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/005-initial-data.yaml::005-initial-data-api-key::antigravity ran successfully in 7ms
2025-12-03 11:53:47 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-12-03 11:53:47 [main] INFO  liquibase.util - Run:                          8
2025-12-03 11:53:47 [main] INFO  liquibase.util - Previously run:               0
2025-12-03 11:53:47 [main] INFO  liquibase.util - Filtered out:                 1
2025-12-03 11:53:47 [main] INFO  liquibase.util - -------------------------------
2025-12-03 11:53:47 [main] INFO  liquibase.util - Total change sets:            9
2025-12-03 11:53:47 [main] INFO  liquibase.util - FILTERED CHANGE SETS SUMMARY
2025-12-03 11:53:47 [main] INFO  liquibase.util - DBMS mismatch:                1
2025-12-03 11:53:47 [main] INFO  liquibase.util - Update summary generated
2025-12-03 11:53:47 [main] INFO  liquibase.command - Update command completed successfully.
2025-12-03 11:53:47 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 10
2025-12-03 11:53:47 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-12-03 11:53:47 [main] INFO  liquibase.command - Command execution complete
2025-12-03 11:53:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-03 11:53:49 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-12-03 11:53:49 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-03 11:53:50 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-03 11:53:51 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-03 11:53:51 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-03 11:53:54 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists api_keys cascade 
Hibernate: 
    drop table if exists connectors cascade 
Hibernate: 
    drop table if exists data_endpoints cascade 
Hibernate: 
    drop table if exists tenants cascade 
Hibernate: 
    create table api_keys (
        created_at timestamp(6),
        expires_at timestamp(6),
        last_used_at timestamp(6),
        prefix varchar(10) not null,
        id uuid not null,
        status varchar(20) not null,
        tenant_id varchar(50) not null,
        key_hash varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table connectors (
        is_active boolean,
        created_at timestamp(6),
        id uuid not null,
        name varchar(255) not null,
        tenant_id varchar(255) not null,
        type varchar(255),
        config jsonb not null,
        registered_tables jsonb,
        status enum ('APPROVED','INIT','REJECTED') not null,
        primary key (id)
    )
Hibernate: 
    create table data_endpoints (
        is_public boolean,
        created_at timestamp(6),
        connector_id uuid not null,
        id uuid not null,
        allowed_methods varchar(255),
        description varchar(255),
        field_config text,
        name varchar(255) not null,
        path_alias varchar(255) not null unique,
        status varchar(255),
        tenant_id varchar(255) not null,
        query_config jsonb,
        primary key (id)
    )
Hibernate: 
    create table tenants (
        created_at timestamp(6),
        updated_at timestamp(6),
        id varchar(50) not null,
        description TEXT,
        name varchar(255) not null,
        status enum ('ACTIVE','INACTIVE') not null,
        primary key (id)
    )
Hibernate: 
    create index idx_key_hash 
       on api_keys (key_hash)
Hibernate: 
    create index idx_tenant_api 
       on api_keys (tenant_id)
Hibernate: 
    alter table if exists data_endpoints 
       add constraint FKpc4b037fvc9dno3j6th1t37eo 
       foreign key (connector_id) 
       references connectors
2025-12-03 11:53:54 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-03 11:53:57 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-03 11:54:00 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-12-03 11:54:00 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-12-03 11:54:00 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-12-03 11:54:00 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 75 ms
2025-12-03 11:54:00 [main] INFO  c.g.d.c.ConnectorControllerTest - Started ConnectorControllerTest in 23.774 seconds (process running for 27.732)
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=?
Hibernate: 
    insert 
    into
        connectors
        (config, created_at, is_active, name, registered_tables, status, tenant_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=?
Hibernate: 
    insert 
    into
        connectors
        (config, created_at, is_active, name, registered_tables, status, tenant_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.tenant_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.tenant_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0
Hibernate: 
    delete 
    from
        connectors 
    where
        id=?
Hibernate: 
    delete 
    from
        connectors 
    where
        id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=?
Hibernate: 
    insert 
    into
        connectors
        (config, created_at, is_active, name, registered_tables, status, tenant_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0
Hibernate: 
    delete 
    from
        connectors 
    where
        id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=?
Hibernate: 
    insert 
    into
        connectors
        (config, created_at, is_active, name, registered_tables, status, tenant_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=? 
        and c1_0.tenant_id=?
Hibernate: 
    update
        connectors 
    set
        config=?,
        is_active=?,
        name=?,
        registered_tables=?,
        status=?,
        tenant_id=?,
        type=? 
    where
        id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0
Hibernate: 
    update
        connectors 
    set
        config=?,
        is_active=?,
        name=?,
        registered_tables=?,
        status=?,
        tenant_id=?,
        type=? 
    where
        id=?
Hibernate: 
    delete 
    from
        connectors 
    where
        id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=?
Hibernate: 
    insert 
    into
        connectors
        (config, created_at, is_active, name, registered_tables, status, tenant_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=? 
        and c1_0.tenant_id=?
Hibernate: 
    update
        connectors 
    set
        config=?,
        is_active=?,
        name=?,
        registered_tables=?,
        status=?,
        tenant_id=?,
        type=? 
    where
        id=?
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 28.52 s -- in com.gs.dsp.controller.ConnectorControllerTest
[INFO] Running com.gs.dsp.DspApplicationTests
2025-12-03 11:54:04 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.gs.dsp.DspApplicationTests]: DspApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-03 11:54:04 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.gs.dsp.DspApplication for test class com.gs.dsp.DspApplicationTests

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-03 11:54:04 [main] INFO  com.gs.dsp.DspApplicationTests - Starting DspApplicationTests using Java 21.0.7 with PID 28892 (started by TungNS in D:\projects\ldop-demo\backend)
2025-12-03 11:54:04 [main] DEBUG com.gs.dsp.DspApplicationTests - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-03 11:54:04 [main] INFO  com.gs.dsp.DspApplicationTests - The following 1 profile is active: "test"
2025-12-03 11:54:06 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-03 11:54:06 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 94 ms. Found 4 JPA repository interfaces.
2025-12-03 11:54:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-12-03 11:54:06 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:ldop_test user=SA
2025-12-03 11:54:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-12-03 11:54:06 [main] INFO  liquibase.database - Set default schema name to PUBLIC
2025-12-03 11:54:07 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-12-03 11:54:07 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-12-03 11:54:07 [main] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-12-03 11:54:07 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-12-03 11:54:07 [main] INFO  liquibase.util - Run:                          0
2025-12-03 11:54:07 [main] INFO  liquibase.util - Previously run:               8
2025-12-03 11:54:07 [main] INFO  liquibase.util - Filtered out:                 1
2025-12-03 11:54:07 [main] INFO  liquibase.util - -------------------------------
2025-12-03 11:54:07 [main] INFO  liquibase.util - Total change sets:            9
2025-12-03 11:54:07 [main] INFO  liquibase.util - FILTERED CHANGE SETS SUMMARY
2025-12-03 11:54:07 [main] INFO  liquibase.util - DBMS mismatch:                1
2025-12-03 11:54:07 [main] INFO  liquibase.util - Update summary generated
2025-12-03 11:54:07 [main] INFO  liquibase.command - Command execution complete
2025-12-03 11:54:07 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-03 11:54:07 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-03 11:54:07 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-03 11:54:07 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-03 11:54:07 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-03 11:54:07 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists api_keys cascade 
Hibernate: 
    drop table if exists connectors cascade 
Hibernate: 
    drop table if exists data_endpoints cascade 
Hibernate: 
    drop table if exists tenants cascade 
Hibernate: 
    create table api_keys (
        created_at timestamp(6),
        expires_at timestamp(6),
        last_used_at timestamp(6),
        prefix varchar(10) not null,
        id uuid not null,
        status varchar(20) not null,
        tenant_id varchar(50) not null,
        key_hash varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table connectors (
        is_active boolean,
        created_at timestamp(6),
        id uuid not null,
        name varchar(255) not null,
        tenant_id varchar(255) not null,
        type varchar(255),
        config jsonb not null,
        registered_tables jsonb,
        status enum ('APPROVED','INIT','REJECTED') not null,
        primary key (id)
    )
Hibernate: 
    create table data_endpoints (
        is_public boolean,
        created_at timestamp(6),
        connector_id uuid not null,
        id uuid not null,
        allowed_methods varchar(255),
        description varchar(255),
        field_config text,
        name varchar(255) not null,
        path_alias varchar(255) not null unique,
        status varchar(255),
        tenant_id varchar(255) not null,
        query_config jsonb,
        primary key (id)
    )
Hibernate: 
    create table tenants (
        created_at timestamp(6),
        updated_at timestamp(6),
        id varchar(50) not null,
        description TEXT,
        name varchar(255) not null,
        status enum ('ACTIVE','INACTIVE') not null,
        primary key (id)
    )
Hibernate: 
    create index idx_key_hash 
       on api_keys (key_hash)
Hibernate: 
    create index idx_tenant_api 
       on api_keys (tenant_id)
Hibernate: 
    alter table if exists data_endpoints 
       add constraint FKpc4b037fvc9dno3j6th1t37eo 
       foreign key (connector_id) 
       references connectors
2025-12-03 11:54:07 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-03 11:54:07 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-03 11:54:08 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-12-03 11:54:08 [main] INFO  com.gs.dsp.DspApplicationTests - Started DspApplicationTests in 3.92 seconds (process running for 35.175)
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.018 s -- in com.gs.dsp.DspApplicationTests
[INFO] Running com.gs.dsp.dto.MetadataSerializationTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.082 s -- in com.gs.dsp.dto.MetadataSerializationTest
[INFO] Running IDOR Protection Tests
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - Invalid UUID format for Resource: 1
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - Invalid UUID format for Resource: 2
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - Invalid UUID format for Resource: 100
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - Invalid UUID format for Resource: not-a-uuid
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - Invalid UUID format for Resource: 12345
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - IDOR attempt detected: tenant=test-tenant tried to access Connector=other-tenant
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - IDOR attempt detected: tenant=test-tenant tried to access Connector=other-tenant
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - IDOR attempt detected: tenant=test-tenant tried to access Resource=other-tenant
2025-12-03 11:54:08 [main] WARN  c.g.d.security.AuthorizationService - IDOR attempt detected: tenant=test-tenant tried to access Data Endpoint=other-tenant
[INFO] Tests run: 14, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.062 s -- in IDOR Protection Tests
[INFO] Running SQL Injection Protection Tests
[INFO] Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.059 s -- in SQL Injection Protection Tests
[INFO] Running com.gs.dsp.service.ApiKeyServiceTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.950 s -- in com.gs.dsp.service.ApiKeyServiceTest
[INFO] Running com.gs.dsp.service.ConnectorServiceIntegrationTest
[WARNING] Tests run: 3, Failures: 0, Errors: 0, Skipped: 3, Time elapsed: 0.010 s -- in com.gs.dsp.service.ConnectorServiceIntegrationTest
[INFO] Running com.gs.dsp.service.DynamicEngineTest
2025-12-03 11:54:10 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.gs.dsp.service.DynamicEngineTest]: DynamicEngineTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-03 11:54:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.gs.dsp.DspApplication for test class com.gs.dsp.service.DynamicEngineTest
Hibernate: 
    select
        de1_0.id,
        de1_0.allowed_methods,
        de1_0.connector_id,
        de1_0.created_at,
        de1_0.description,
        de1_0.field_config,
        de1_0.is_public,
        de1_0.name,
        de1_0.path_alias,
        de1_0.query_config,
        de1_0.status,
        de1_0.tenant_id 
    from
        data_endpoints de1_0
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=?
Hibernate: 
    insert 
    into
        connectors
        (config, created_at, is_active, name, registered_tables, status, tenant_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        null,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id 
    from
        connectors c1_0 
    where
        c1_0.id=?
Hibernate: 
    insert 
    into
        data_endpoints
        (allowed_methods, connector_id, created_at, description, field_config, is_public, name, path_alias, query_config, status, tenant_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        de1_0.id,
        de1_0.allowed_methods,
        de1_0.connector_id,
        de1_0.created_at,
        de1_0.description,
        de1_0.field_config,
        de1_0.is_public,
        de1_0.name,
        de1_0.path_alias,
        de1_0.query_config,
        de1_0.status,
        de1_0.tenant_id 
    from
        data_endpoints de1_0 
    where
        de1_0.id=? 
        and de1_0.tenant_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.config,
        c1_0.created_at,
        c1_0.is_active,
        c1_0.name,
        c1_0.registered_tables,
        c1_0.status,
        c1_0.tenant_id,
        c1_0.type 
    from
        connectors c1_0 
    where
        c1_0.id=?
2025-12-03 11:54:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-Self H2 - Starting...
2025-12-03 11:54:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-Self H2 - Added connection conn20: url=jdbc:h2:mem:ldop_test user=SA
2025-12-03 11:54:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-Self H2 - Start completed.
[WARNING] Tests run: 2, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 2.815 s -- in com.gs.dsp.service.DynamicEngineTest
[INFO] Running com.gs.dsp.service.DynamicQueryServiceTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.252 s -- in com.gs.dsp.service.DynamicQueryServiceTest
[INFO] Running com.gs.dsp.service.MetadataInferenceServiceTest
[INFO] Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.896 s -- in com.gs.dsp.service.MetadataInferenceServiceTest
[INFO] 
[INFO] Results:
[INFO] 
[WARNING] Tests run: 78, Failures: 0, Errors: 0, Skipped: 4
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:22 min
[INFO] Finished at: 2025-12-03T11:54:18+07:00
[INFO] ------------------------------------------------------------------------
